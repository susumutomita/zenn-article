---
title: "はじめに"
free: true
---

## ブロックチェインの基本概念と歴史

ブロックチェインとは、取引記録をブロックという単位にまとめて鎖状（チェイン）に連結し、ネットワーク上の多数のコンピュータで共有・管理する分散型の台帳技術です。

2008年10月、サトシ・ナカモトによってビットコインのホワイトペーパーが公開されました。 ([参考記事](https://coinpost.jp/?p=115638))
その後、2009年初頭には最初のブロック（ジェネシスブロック）が生成されてビットコインネットワークが稼働しました。

その後、2015年にローンチされたイーサリアム（Ethereum）はブロックチェイン上で**スマートコントラクト**と呼ばれるプログラムを実行できるようにしました。この結果、ブロックチェインの可能性を大きく拡張しました ([Testing the Ethereum merge](https://antithesis.com/case_studies/ethereum_merge/#:~:text=Ethereum%20is%20a%20decentralized%20blockchain,crypto%20projects%20across%20the%20globe))。

スマートコントラクトにより、ブロックチェイン上で自動的に実行される契約や複雑なアプリケーションを構築できるようになり、分散型アプリケーション(dApps)という新たな分野が開花しました。現在ではEthereumをはじめ多くのブロックチェインプラットフォームが存在し、金融（暗号資産やDeFi）、アート（NFT）、ゲーム（ブロックチェインゲーム）など様々な領域で活用が進んでいます。

**分散型システムの利点:**

ブロックチェインのような分散型ネットワークにはいくつもの利点があります。

- 単一の管理者を必要としないため信頼性が高く、ネットワーク全体でデータを検証・保持するため改ざん耐性も強い。
- システムが冗長化されているので障害に強く、透明性の高い取引記録を残る。

ブロックチェインは安全性、透明性、不変性を備えた分散型システムを構築できる技術として注目されています。

**分散型システムの課題:** 一方で、ブロックチェイン技術にはいくつかの課題も存在します。代表的なものに**スケーラビリティ（拡張性）**の問題があります。ユーザーやトランザクションの増加に伴い、ネットワーク全体で取引を検証する仕組みのため処理が遅延・非効率になりがちです。([Google Cloud ❤ Web3](https://zenn.dev/google_cloud_jp/articles/0795db18a936ba))。

例えばビットコインやイーサリアムでは1秒間に処理できる取引数が限られており、利用者が急増すると手数料の高騰や取引確認の遅延が発生します。また、ブロックチェイン上で合意を取るコンセンサスアルゴリズム（後述）の種類によってはエネルギー消費が非常に大きくなる（例：Proof of Workによるマイニング競争）点も課題です。このように、分散型ならではのトレードオフとして**性能**や**スケーラビリティ**の問題を克服する必要があり、現在も技術的な改良が続けられています。

## 実装について

本書では、実装言語に**[Zig](https://ziglang.org/learn/)**を採用します。

Zigは2015年頃に登場した比較的新しいオープンソースのプログラミング言語です。
低レベルな制御と高い実行性能を備えており、安全性とシンプルさを両立した設計が特徴です。

筆者が使ってみたかったというのも大きな理由ですが、シンプルさと制御性も理由にあります。 ([Zigのすすめ Rustとの比較 #ZIG - Qiita](https://qiita.com/lechatthecat/items/d448727b817b7b03b535))、([Zigプログラミング言語とは？RustやC++との違いを解説 – せせらブログ](https://sesera231.com/archives/7703))

**EVM（Ethereum Virtual Machine）互換:**

EVMとは、前述のEthereumが採用するスマートコントラクト実行環境のことで、Ethereumにおける取引やコントラクトのロジックはすべてEVM上で動作します。

EVM互換のチェインにすることで、Solidityで書かれたスマートコントラクトを動作させることが可能になります。

## 本書の対象読者と前提知識

本書は、**ブロックチェインやスマートコントラクトの基礎知識を持ち、さらに深く理解したいエンジニア**を主な対象としています。以下のような読者に向けて執筆しています。

- **ブロックチェインの基本を触ったことがある人:** ビットコインやイーサリアムなどを使ったことがある、あるいはブロックチェインの概念を一通り学んだことがある方。トランザクションやマイニングといった用語に馴染みがあることを前提に進めます。
- **Solidityやスマートコントラクト開発に興味がある人:** 分散型アプリケーション（dApp）の開発やEthereum上でのスマートコントラクトに興味を持っている方。本書ではEVM互換チェインを実装する過程で、スマートコントラクトがブロックチェイン上でどう動くかも扱いますので、その点に興味がある読者に有益です。
- **Zigに興味があり、実践的なプロジェクトで学びたい人:** Zig言語自体に興味がある方や、新しいシステムプログラミング言語を触れてみたい方。本書では実際のブロックチェインという大型プロジェクトを題材にZigのコードを書いていくため、言語の学習と応用を同時に体験できます。

前提として、何らかのプログラミング言語での開発経験があることを想定しています（C言語やRust, Go, C++などシステムレベルの言語経験があれば尚良いですが、必須ではありません）。またブロックチェイン特有の暗号技術やネットワークの知識については序盤で解説しますが、基本的な概念を知っていると理解がスムーズになるでしょう。

## 各章で扱う内容の概要（ロードマップ）

本書はステップバイステップでシンプルなブロックチェインを作り上げ、機能を拡張していく構成になっています。各章の大まかなロードマップは次の通りです。

1. **ブロックチェインの基本的な実装:**
   最初に、ブロックチェインの核である、データ構造と機能を実装します。次に、ブロックやトランザクションの構造を定義し、ハッシュチェインによる連結処理やプルーフ・オブ・ワーク（PoW）を利用したマイニング処理を実装します。最後に、単一ノード上で動作するシンプルなブロックチェインを作成し、ブロック生成および検証の流れを理解します。

2. **ネットワーク化と分散ノード:** 次に、作成したブロックチェインをネットワーク対応させ、複数のノードで分散稼働できるようにします。P2Pネットワーク上でノード間がブロックやトランザクションをやり取りし、全ノードで台帳を同期する仕組みを実装します。ここではノード間通信のプロトコル設計やブロードキャストの方法、基本的な**合意形成**（コンセンサス）の考え方を学びます。

3. **コンセンサスアルゴリズム（PoWとPoS）:** ブロックチェインの肝であるコンセンサスアルゴリズムについて、代表的なProof of WorkとProof of Stakeを実装します。前章までで実装したPoWを拡張し、難易度調整やブロック承認の仕組みを掘り下げます。

4. **スマートコントラクトとEVM互換:** いよいよブロックチェイン上でスマートコントラクトを動かす仕組みを作ります。本章ではEthereumのEVMをモデルに、シンプルなバイトコード実行環境（仮想マシン）を実装し、トランザクションによってコントラクトのコードを保存・実行できるようにします。Solidityで書かれたコントラクトをコンパイルしたバイトコードを我々のチェイン上で実行し、Ethereumと同様に状態遷移やガス消費の概念を再現します。難易度は高いですが、EVM互換にすることで既存の豊富なツール群を活用できるようになり、実用的なブロックチェインに一歩近づきます。

5. **最新技術への対応と発展的トピック:** 最終章では、現在注目されているブロックチェインの最新技術動向に触れ、本書で作成したチェインへの応用可能性を探ります。例えば、ゼロ知識証明を活用した新技術である**zkTLS**（Zero-Knowledge TLS）の概念を紹介し、ブロックチェインとWeb2のデータ連携を安全に行う仕組みについて考察します。そのほか、スケーラビリティ向上のためのレイヤー2技術やブロックチェインの相互運用、分散型識別子(DID)や最新の暗号アルゴリズムなど、チェイン開発の次のステップとなり得るトピックについて議論します。

以上のような流れで章立てを行い、徐々に機能を追加しながら最終的にEVM互換のブロックチェインを完成させていきます。

## 執筆スタイルと進め方

本書は実装重視のハンズオンスタイルで進めていきます。各章では具体的な機能をテーマに据え、実際のZigコードを書きながら理解を深めます。文章だけでなくコードリストを交え、読者の皆さんが手を動かして試せるように構成しています。

実装したコードは章ごとにGitHubの[リポジトリ](https://github.com/susumutomita/BlockChain)で公開していきます。読者はそのコードをクローンして実行したり、自分で改良を加えたりできます。また、本書の原稿もGitHub上の[`zenn-article`リポジトリ](https://github.com/susumutomita/zenn-article)で管理し、誤字脱字の修正や読者からのフィードバック反映を行いながら執筆を進めます。最終的にはZennの記事として公開し、オンラインで幅広く読める形にする予定です。
