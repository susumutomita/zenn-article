---
title: "はじめに"
free: true
---

## ブロックチェインの基本概念と歴史

### ブロックチェインとは何か

ブロックチェインとは、取引記録をブロックという単位にまとめて鎖状（チェイン）に連結し、ネットワーク上の多数のコンピュータで共有・管理する分散型の台帳技術です。データは一定ごとに**ブロック**と呼ばれる単位にまとめられ、各ブロックには前のブロックのハッシュ値（電子的な指紋）が含まれるため、ブロックが鎖（チェイン）のようにつながっています。全ノードがこのチェインのコピーを保持し、新しいブロックが提案されるとネットワーク全体で正当性を検証してから追加します（この合意形成プロセスを**コンセンサスアルゴリズム**と呼びます）。
こうした構造により、一度記録されたデータを改ざんすることは極めて困難です。仮に一部のブロックを書き換えても、その変更は他の多数のノードが持つ台帳と食い違うため承認されません ([Peer to Peer Network in Blockchain in Detail](https://blocktpoint.com/blockchain/blockchain-peer-to-peer-network#:~:text=4,Blockchain%20transactions%20are%20unchangeable))。中央管理者がおらず参加者間でデータを共有・検証するため、ブロックチェインは高い**耐改ざん性**と**可用性**（単一障害点がないこと）を備えています。また、取引履歴が公開されたネットワーク上に分散保存されることで透明性も確保されます。

### ブロックチェインの主な特徴

- **分散管理**: データの記録が特定のサーバではなく多数のノードによって行われます。これにより一部ノードが停止してもシステム全体は影響を受けにくく、単一の管理者に依存しません ([Peer to Peer Network in Blockchain in Detail](https://blocktpoint.com/blockchain/blockchain-peer-to-peer-network#:~:text=Peer,peer))。
- **改ざん耐性**: 各ブロックが前のブロックと暗号学的に結合されているため、過去のデータを書き換えるには全ての後続ブロックも変更し多数のノードを同時に改ざんする必要があります。現実的にこれは非常に困難で、記録が事実上不変であることを保証します。
- **合意形成（コンセンサス）**: ネットワーク内のノードは、新しいブロックをブロックチェインに追加してよいかを**合意アルゴリズム**によって決定します。例えばビットコインではProof of Work（仕事量証明）と呼ばれる方式でノード間の合意を取っています。これによりデータの正当性が担保されます。
- **透明性と追跡可能性**: 公開ブロックチェインでは取引記録を誰でも閲覧できます。全履歴がチェイン上に残るため、いつ誰がどのような取引したのか追跡可能です（ただし当事者の実名ではなく暗号学的なアドレスで記録されます）。

上記の特徴により、元々ブロックチェインは暗号資産（仮想通貨）であるビットコインの基盤技術として考案されましたが、現在では金融以外の分野でもその**分散性**や**信頼性**を活かした応用が模索されています。

## ブロックチェインの歩み

ブロックチェイン技術はここ数年で急速に注目を集めていますが、その始まりは2008年に遡ります。そこから現在に至るまでの主な歴史を簡単に見てみましょう。

- **2008年:** サトシ・ナカモトがビットコインのホワイトペーパー「Bitcoin: A Peer-to-Peer Electronic Cash System」を公開 [Link](https://bitcoin.org/bitcoin.pdf)。ここでブロックチェインによる分散型のデジタル通貨のアイデアが示されました。
- **2009年:** ビットコインのネットワークが正式に稼働を開始。最初のブロック（ジェネシスブロック）が生成され、以降世界中の有志のコンピュータがネットワークに参加して取引の承認作業（マイニング）を行うようになりました。
- **2015年:** 第2世代のブロックチェインとも言われる「イーサリアム (Ethereum)[Link](https://ethereum.org/ja/whitepaper/)」がリリース。イーサリアムは独自の暗号資産（ETH）を持つだけでなく、ブロックチェイン上で**スマートコントラクト**（自動実行される契約プログラム）を動作させるプラットフォームを提供しました。これによりブロックチェインの用途が通貨以外の分散アプリケーション領域に大きく広がりました。
- **2017年～:** ブロックチェイン技術への関心が高まり、各国で多数のプロジェクトや暗号資産が登場しました。企業の間でもブロックチェインを活用した決済、サプライチェイン管理、デジタル資産の記録など様々な実証実験が行われています。近年ではブロックチェインを基盤とした**分散型金融（DeFi）**や**NFT**といった新しい概念も誕生し、技術の発展が続いています。

このようにブロックチェインはビットコインを起点として登場し、その後のイーサリアムによって応用範囲が拡大しました。現在も第三世代のブロックチェイン（スケーラビリティや省エネ性能の向上、企業での採用など）へと進化を遂げつつあり、今後も幅広い分野で発展が期待されています。

**分散型システムの利点:**

ブロックチェインのような分散型ネットワークにはいくつもの利点があります。

- 単一の管理者を必要としないため信頼性が高く、ネットワーク全体でデータを検証・保持するため改ざん耐性も強い。
- システムが冗長化されているので障害に強く、透明性の高い取引記録を残る。

ブロックチェインは安全性、透明性、不変性を備えた分散型システムを構築できる技術として注目されています。

**分散型システムの課題:** 一方で、ブロックチェイン技術にはいくつかの課題も存在します。代表的なものに**スケーラビリティ（拡張性）**の問題があります。ユーザーやトランザクションの増加に伴い、ネットワーク全体で取引を検証する仕組みのため処理が遅延・非効率になりがちです。([Google Cloud ❤ Web3](https://zenn.dev/google_cloud_jp/articles/0795db18a936ba))。

例えばビットコインやイーサリアムでは1秒間に処理できる取引数が限られており、利用者が急増すると手数料の高騰や取引確認の遅延が発生します。また、ブロックチェイン上で合意を取るコンセンサスアルゴリズム（後述）の種類によってはエネルギー消費が非常に大きくなる（例：Proof of Workによるマイニング競争）点も課題です。このように、分散型ならではのトレードオフとして**性能**や**スケーラビリティ**の問題を克服する必要があり、現在も技術的な改良が続けられています。

## 実装について

本書では、実装言語に**[Zig](https://ziglang.org/learn/)**を採用します。

Zigは2015年頃に登場した比較的新しいオープンソースのプログラミング言語です。
低レベルな制御と高い実行性能を備えており、安全性とシンプルさを両立した設計が特徴です。

筆者が使ってみたかったというのも大きな理由ですが、シンプルさと制御性も理由にあります。 ([Zigのすすめ Rustとの比較 #ZIG - Qiita](https://qiita.com/lechatthecat/items/d448727b817b7b03b535))、([Zigプログラミング言語とは？RustやC++との違いを解説 – せせらブログ](https://sesera231.com/archives/7703))

**EVM（Ethereum Virtual Machine）互換:**

EVMとは、前述のEthereumが採用するスマートコントラクト実行環境のことで、Ethereumにおける取引やコントラクトのロジックはすべてEVM上で動作します。

EVM互換のチェインにすることで、Solidityで書かれたスマートコントラクトを動作させることが可能になります。

## DockerとDocker Composeを活用した複数ノードの分散システム実装

ブロックチェインの概念を理解するためには、実際に小規模なブロックチェインネットワークを**自分で動かしてみること**が非常に有効です。本書では、複数のノードが相互にやり取りする簡易ブロックチェインシステムの実装を通じて、ブロックチェインの仕組みを学んでいきます。具体的には、**Docker**というコンテナ仮想化技術と**Docker Compose**というツールを活用し、1台の手元PC上で複数のブロックチェインノードを稼働させます。それぞれのノードを独立した環境で動作させるようにして、物理的に複数のサーバやクラウドインスタンス（例: AWSのEC2）を用意しなくても分散システムを再現できます ([Link](https://www.lewuathe.com/2019-01-08-launch-distributed-system-with-docker-compose/#:~:text=Docker%20should%20be%20a%20framework,major%20two%20distributed%20system%20with))。
このように、本書では最新のコンテナ技術を利用してブロックチェインを構築・検証する実践的な方法を採っています。ただ初心者向けとはいえ、ブロックチェインの肝となる技術要素（例えばハッシュ関数によるブロックの紐付けやネットワーク内合意のメカニズムなど）は可能な限り内部動作まで踏み込んで解説します。読者の皆さんには、単に手順通り動かすだけでなく「なぜそのように動くのか」も理解できるよう、技術的な深みはしっかり維持しています。

## 本書の対象読者と前提知識

本書は、**ブロックチェインやスマートコントラクトの基礎知識を持ち、さらに深く理解したいエンジニア**を主な対象としています。以下のような読者に向けて執筆しています。

- **ブロックチェインの基本を触ったことがある人:** ビットコインやイーサリアムなどを使ったことがある、あるいはブロックチェインの概念を一通り学んだことがある方。トランザクションやマイニングといった用語に馴染みがあることを前提に進めます。
- **Solidityやスマートコントラクト開発に興味がある人:** 分散型アプリケーション（dApp）の開発やEthereum上でのスマートコントラクトに興味を持っている方。本書ではEVM互換チェインを実装する過程で、スマートコントラクトがブロックチェイン上でどう動くかも扱いますので、その点に興味がある読者に有益です。
- **Zigに興味があり、実践的なプロジェクトで学びたい人:** Zig言語自体に興味がある方や、新しいシステムプログラミング言語を触れてみたい方。本書では実際のブロックチェインという大型プロジェクトを題材にZigのコードを書いていくため、言語の学習と応用を同時に体験できます。

前提として、何らかのプログラミング言語での開発経験があることを想定しています（C言語やRust, Go, C++などシステムレベルの言語経験があれば尚良いですが、必須ではありません）。またブロックチェイン特有の暗号技術やネットワークの知識については序盤で解説しますが、基本的な概念を知っていると理解がスムーズになるでしょう。

## 各章で扱う内容の概要（ロードマップ）

本書はステップバイステップでシンプルなブロックチェインを作り上げ、機能を拡張していく構成になっています。各章の大まかなロードマップは次の通りです。

1. **開発環境の準備**: まずDocker Desktopなどをインストールし、DockerおよびDocker Composeが利用できる環境を整えます。合わせてプログラミング言語や必要なライブラリのセットアップも行います。本書では環境構築の方法から順を追って説明するので、事前知識がなくても安心です。

2. **ブロックチェインの基本的な実装:**
   最初に、ブロックチェインの核である、データ構造と機能を実装します。次に、ブロックやトランザクションの構造を定義し、ハッシュチェインによる連結処理やプルーフ・オブ・ワーク（PoW）を利用したマイニング処理を実装します。最後に、単一ノード上で動作するシンプルなブロックチェインを作成し、ブロック生成および検証の流れを理解します。

3. **ネットワーク化と分散ノード:** 次に、作成したブロックチェインをネットワーク対応させ、複数のノードで分散稼働できるようにします。P2Pネットワーク上でノード間がブロックやトランザクションをやり取りし、全ノードで台帳を同期する仕組みを実装します。ここではノード間通信のプロトコル設計やブロードキャストの方法、基本的な**合意形成**（コンセンサス）の考え方を学びます。

4. **コンセンサスアルゴリズム（PoWとPoS）:** ブロックチェインの肝であるコンセンサスアルゴリズムについて、代表的なProof of WorkとProof of Stakeを実装します。前章までで実装したPoWを拡張し、難易度調整やブロック承認の仕組みを掘り下げます。

5. **スマートコントラクトとEVM互換:** いよいよブロックチェイン上でスマートコントラクトを動かす仕組みを作ります。本章ではEthereumのEVMをモデルに、シンプルなバイトコード実行環境（仮想マシン）を実装し、トランザクションによってコントラクトのコードを保存・実行できるようにします。Solidityで書かれたコントラクトをコンパイルしたバイトコードを我々のチェイン上で実行し、Ethereumと同様に状態遷移やガス消費の概念を再現します。難易度は高いですが、EVM互換にすることで既存の豊富なツール群を活用できるようになり、実用的なブロックチェインに一歩近づきます。

6. **最新技術への対応と発展的トピック:** 最終章では、現在注目されているブロックチェインの最新技術動向に触れ、本書で作成したチェインへの応用可能性を探ります。例えば、ゼロ知識証明を活用した新技術である**zkTLS**（Zero-Knowledge TLS）の概念を紹介し、ブロックチェインとWeb2のデータ連携を安全に行う仕組みについて考察します。そのほか、スケーラビリティ向上のためのレイヤー2技術やブロックチェインの相互運用、分散型識別子(DID)や最新の暗号アルゴリズムなど、チェイン開発の次のステップとなり得るトピックについて議論します。

以上のような流れで章立てを行い、徐々に機能を追加しながら最終的にEVM互換のブロックチェインを完成させていきます。

## 執筆スタイルと進め方

本書は実装重視のハンズオンスタイルで進めていきます。各章では具体的な機能をテーマに据え、実際のZigコードを書きながら理解を深めます。文章だけでなくコードリストを交え、読者の皆さんが手を動かして試せるように構成しています。

実装したコードは章ごとにGitHubの[リポジトリ](https://github.com/susumutomita/BlockChain)で公開していきます。読者はそのコードをクローンして実行したり、自分で改良を加えたりできます。また、本書の原稿もGitHub上の[`zenn-article`リポジトリ](https://github.com/susumutomita/zenn-article)で管理し、誤字脱字の修正や読者からのフィードバック反映を行いながら執筆を進めます。最終的にはZennの記事として公開し、オンラインで幅広く読める形にする予定です。
