---
title: "AIの深層インタビューで曖昧なアイデアを仕様書に変えるDeepFormを作った"
emoji: "📋"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [AI, Claude, TypeScript, Hono]
published: false
---

## この記事について

[DeepForm](https://github.com/susumutomita/DeepForm)というツールを作りました。AIが構造化されたインタビューで曖昧なプロダクトアイデアを深掘りし、エビデンス付きの仕様書を生成してくれます。

デプロイ済みのものは[deepform.exe.xyz](https://deepform.exe.xyz)で触れます。GitHub OAuthでログインすればすぐ使えます。

## きっかけ

エンジニアに限らず、誰でもAIに指示を出せば動くものを作れる時代になりました。ただ、動くものと本番に出せるものの間にはかなりの距離があります。エッジケースやセキュリティ要件、受け入れ基準など、見落としがちな要件を拾えていないと、結局作り直しになります。

プロンプトに「こういうアプリを作って」と書くだけでは、仕様の抜け漏れは防げません。コーディング自体はAIが得意になっていく一方で、「そもそも何を作るべきか」を整理する部分は人間の仕事のまま残っています。この部分をAIで支援できないかと思い、DeepFormを作りました。

## 5ステップのパイプライン

DeepFormは以下の5段階で動きます。

### 1. AI深層インタビュー

ユーザーが課題テーマを入力すると、AIが構造化された質問を投げかけます。汎用チャットではなく、具体例やペインポイントを掘り下げるためのインタビュー専用の設計にしています。

「どんなユーザーが使うのか」「その問題が起きる具体的な場面は」「今はどう対処しているのか」といった質問で、曖昧な思いつきを具体的な要件に変換していきます。

### 2. ファクト抽出

インタビューの内容から、エビデンス付きのファクトを抽出します。すべての要件が「ユーザーの発言のどこから来たか」を追跡できるようになっています。

仕様書の根拠を追えるのがポイントで、「なぜこの機能が必要なのか」に対して「インタビューのここでユーザーがこう言ったから」と答えられます。

### 3. 仮説生成

抽出したファクトから、検証可能な仮説を生成します。支持するエビデンスだけでなく、反証（counter-evidence）も併せて提示します。

確証バイアスを防ぐための工夫で、「ユーザーはこう言っているが、これと矛盾する発言もある」という情報があれば、仕様の精度が上がります。

### 4. PRD生成

ISO 25010品質基準に沿った、MVPスコープのPRD（Product Requirements Document）を生成します。機能要件だけでなく、性能要件、セキュリティ要件、受け入れ基準まで含まれます。

### 5. 仕様エクスポート

最終的に`spec.json`として機械可読な仕様を出力します。API定義、データベーススキーマ、テストケース定義が含まれます。

この`spec.json`はClaude CodeやCursorにそのまま渡せます。PRD.mdをリポジトリのルートに置けば、コーディングエージェントがそこから実装を始められます。

## Campaign Mode

DeepFormにはキャンペーンモードがあります。インタビューリンクを共有して、複数ユーザーからフィードバックを集約できます。

1対1のインタビューだけでなく、複数ユーザーの回答をリアルタイムで横断分析し、共通するペインポイントやパターンを抽出します。プロダクトマネージャーがユーザーリサーチするような使い方を想定しています。

## 技術スタック

| レイヤー | 技術 |
|---------|------|
| ランタイム | Bun |
| サーバー | Hono + TypeScript |
| フロントエンド | Vite + vanilla TypeScript（フレームワークなし） |
| データベース | SQLite + Kysely（WALモード） |
| AI | Claude API（Anthropic） |
| 認証 | GitHub OAuth |
| 決済 | Stripe（オプション、デフォルト無効） |
| 国際化 | 日本語、英語、スペイン語 |

フロントエンドにフレームワークを使っていないのは意図的な選択です。5ステップのパイプラインは状態遷移が明確で、ReactやVueを入れる複雑さに見合わないと判断しました。

## セルフホスト

MITライセンスで公開しています。セルフホストは以下の手順で可能です。

```bash
git clone https://github.com/susumutomita/DeepForm.git
cd DeepForm
make start
```

Bunと`ANTHROPIC_API_KEY`の環境変数が必要になります。テストは317件あり、`make before-commit`でlint、型チェック、テストを一括実行できます。

## まとめ

DeepFormが解いている問題は「AIにコードを書かせる前に、何を書くべきかを明確にする」ことです。

コーディングエージェントの能力が上がるほど、入力の質、つまり仕様の精度がボトルネックになっていきます。DeepFormはそのボトルネックに対するアプローチの1つとして作りました。
