---
title: "AIの深層インタビューで曖昧なアイデアを仕様書に変えるDeepFormを作った"
emoji: "📋"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [AI, Claude, TypeScript, Hono]
published: false
---

## この記事について

[DeepForm](https://github.com/susumutomita/DeepForm)というツールを作りました。AIが構造化されたインタビューで曖昧なプロダクトアイデアを深掘りし、エビデンス付きの仕様書を生成してくれます。

デプロイ済みのものは[deepform.exe.xyz](https://deepform.exe.xyz)で触れます。GitHub OAuthでログインすればすぐ使えます。

## きっかけ

AIでプロトタイプを作るのは簡単になりました。ただ、本番に耐えるソフトウェアを出荷するには、エッジケースやセキュリティ要件、受け入れ基準など、見落としがちな要件をちゃんと拾う必要があります。

プロンプトに「こういうアプリを作って」と書いても、抜け漏れだらけの仕様から生まれるコードは結局作り直しになりがちです。コードを書く前の段階、つまり「何を作るべきか」を明確にする部分へAIを使えないかと思い、DeepFormを作りました。

## 5ステップのパイプライン

DeepFormは以下の5段階で動きます。

### 1. AI深層インタビュー

ユーザーが課題テーマを入力すると、AIが構造化された質問を投げかけます。汎用チャットではなく、具体例やペインポイントを掘り下げるためのインタビュー専用の設計にしています。

「どんなユーザーが使うのか」「その問題が起きる具体的な場面は」「今はどう対処しているのか」といった質問で、曖昧な思いつきを具体的な要件に変換していきます。

### 2. ファクト抽出

インタビューの内容から、エビデンス付きのファクトを抽出します。すべての要件が「ユーザーの発言のどこから来たか」を追跡できるようになっています。

仕様書の根拠を追えるのがポイントで、「なぜこの機能が必要なのか」に対して「インタビューのここでユーザーがこう言ったから」と答えられます。

### 3. 仮説生成

抽出したファクトから、検証可能な仮説を生成します。支持するエビデンスだけでなく、反証（counter-evidence）も併せて提示します。

確証バイアスを防ぐための工夫で、「ユーザーはこう言っているが、これと矛盾する発言もある」という情報があれば、仕様の精度が上がります。

### 4. PRD生成

ISO 25010品質基準に沿った、MVPスコープのPRD（Product Requirements Document）を生成します。機能要件だけでなく、性能要件、セキュリティ要件、受け入れ基準まで含まれます。

### 5. 仕様エクスポート

最終的に`spec.json`として機械可読な仕様を出力します。API定義、データベーススキーマ、テストケース定義が含まれます。

この`spec.json`はClaude CodeやCursorにそのまま渡せます。PRD.mdをリポジトリのルートに置けば、コーディングエージェントがそこから実装を始められます。

## Campaign Mode

DeepFormにはキャンペーンモードがあります。インタビューリンクを共有して、複数ユーザーからフィードバックを集約できます。

1対1のインタビューだけでなく、複数ユーザーの回答をリアルタイムで横断分析し、共通するペインポイントやパターンを抽出します。プロダクトマネージャーがユーザーリサーチするような使い方を想定しています。

## 技術スタック

| レイヤー | 技術 |
|---------|------|
| ランタイム | Bun |
| サーバー | Hono + TypeScript |
| フロントエンド | Vite + vanilla TypeScript（フレームワークなし） |
| データベース | SQLite + Kysely（WALモード） |
| AI | Claude API（Anthropic） |
| 認証 | GitHub OAuth |
| 決済 | Stripe（オプション、デフォルト無効） |
| 国際化 | 日本語、英語、スペイン語 |

フロントエンドにフレームワークを使っていないのは意図的な選択です。5ステップのパイプラインは状態遷移が明確で、ReactやVueを入れる複雑さに見合わないと判断しました。

## Molt Marketの実験から学んだこと

DeepFormは、同時期に行った[Molt Marketの実験](/blog/molt-market-agent-economy)と対になるプロジェクトです。

Molt Marketでは、エージェントに能力と資本を与えて自律的に経済活動をさせようとしました。結果は売上$0でした。エージェントは「行動する理由」がないと動きません。

DeepFormはその逆のアプローチを取っています。エージェントに自律的な判断をさせるのではなく、人間が「プロダクトを作りたい」という明確な動機を持っている場面で、AIがインタビューと仕様化を担います。

動機が外部から与えられる場面では、AIは確実に機能します。DeepFormが実用的に動いているのは、「何を作りたいか」という人間側の意図がはっきりしているからだと感じています。

## セルフホスト

MITライセンスで公開しています。セルフホストは以下の手順で可能です。

```bash
git clone https://github.com/susumutomita/DeepForm.git
cd DeepForm
make start
```

Bunと`ANTHROPIC_API_KEY`の環境変数が必要になります。テストは317件あり、`make before-commit`でlint、型チェック、テストを一括実行できます。

## まとめ

DeepFormが解いている問題は「AIにコードを書かせる前に、何を書くべきかを明確にする」ことです。

コーディングエージェントの能力が上がるほど、入力の質、つまり仕様の精度がボトルネックになっていきます。DeepFormはそのボトルネックに対するアプローチの1つとして作りました。
